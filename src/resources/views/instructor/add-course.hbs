<main class="instructor-add-course">
  <div class="container">
    <div class="instructor-add-course__sidebar">
      <div class="instructor-add-course__image-section">
        <img src="/assets/uploads/default.png" alt="Profile Image" class="instructor-add-course__avatar">
        <div class="instructor-add-course__brief">
          <div class="instructor-add-course__name">Tung Nguyen</div>
          <div class="instructor-add-course__accountType">INSTRUCTOR</div>
        </div>
      </div>

      <div class="instructor-add-course__displayed-view">
        <a class="instructor-add-course__displayed-link" href="/instructor/edit-profile">Edit Profile</a>
        <a class="instructor-add-course__displayed-link current" href="#">Add Course</a>
      </div>
    </div>

    <div class="instructor-add-course__profile-section">
      <div class="instructor-add-course__profile-heading">
        <h1 class="instructor-add-course__heading">Add Course</h1>
        <p class="instructor-add-course__desc">Create new course as an instructor</p>
      </div>

      <div class="instructor-add-course__form-section">
        <form method="POST" id="instructorAddCourseForm" enctype="multipart/form-data">
          <div class="form-group">
            <label for="title">Course Title</label>
            <input
                id="title"
                name="title"
                value="Course title"
                type="text"
                onblur="validateTitle()"
            />
          </div>

          <div class="form-group">
            <label for="description">Course Description</label>
            <div id="description" class="instructor-add-course__desc-box" contenteditable="true">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium aliquid beatae dolore odio optio!
              Ab, adipisci alias architecto autem facere, facilis iure libero molestiae numquam pariatur rerum sunt
              vitae. Accusantium aliquid aperiam architecto, atque blanditiis commodi dolore doloremque dolores, eveniet
              explicabo fuga fugiat laudantium nihil praesentium quasi rerum vitae? Totam!
            </div>
          </div>
          <input type="hidden" name="descContent" id="descContent">

          <div class="form-group">
            <label for="category">Course Category</label>
            <select name="category" id="category" onblur="validateCategory()">
              <option value="-1" disabled selected>-- Select Category --</option>
              <option value="Wilderness Survival">Wilderness Survival</option>
              <option value="Knots and Lashings">Knots and Lashings</option>
              <option value="STEM">STEM</option>
              <option value="Teamwork and Leadership">Teamwork and Leadership</option>
            </select>
          </div>

          <div class="form-group">
            <button type="submit">
              <strong>CREATE</strong>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</main>

<!--About the desc, get the content through the input #descContent-->
<script>
  // Form submission
  document.getElementById("instructorAddCourseForm")
      .addEventListener("submit", function (e) {
        e.preventDefault();

        let isSubmittable =
            validateTitle() &&
            validateCategory();

        if (isSubmittable) {
          // EDIT ACTION ...
          // ....
          // this.submit();
          console.log(this);
        }
      });

  // Required
  function validateTitle() {
    const title = document.getElementById("title");
    if (title.value.trim() === "") {
      showError(title, "Course title is required");
      return false;
    } else {
      clearError(title);
      return true;
    }
  }

  // Required
  function validateCategory() {
    const category = document.getElementById("category");
    if (category.value === "-1") {
      showError(category, "Please select a course category");
      return false;
    } else {
      clearError(category);
      return true;
    }
  }

  // Error Message Display
  function showError(input, message) {
    const formGroup = input.closest(".form-group");
    let errorMessage = formGroup.querySelector(".error-message");
    if (!errorMessage) {
      errorMessage = document.createElement("div");
      errorMessage.className = "error-message";
      formGroup.appendChild(errorMessage);
    }
    errorMessage.textContent = message;
    input.classList.add("error");
  }

  // Error Message Clear
  function clearError(input) {
    const formGroup = input.closest(".form-group");
    const errorMessage = formGroup.querySelector(".error-message");
    if (errorMessage) {
      errorMessage.remove();
    }
    input.classList.remove("error");
  }
</script>